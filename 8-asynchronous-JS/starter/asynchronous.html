<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
    //     var second=()=>{setTimeout(()=>{
    //         console.log("second");
    //     },2000);
    // }
    //     var first=()=>{
    //         console.log("first");
    //         second();
    //         console.log("end");

    //     }
    //     first();
    
    //callback
    // function getRecipe() {
    //         setTimeout(() => {
    //             const recipeID = [523, 883, 432, 974];
    //             console.log(recipeID);

    //             setTimeout(id => {
    //                 const recipe = {title: 'Fresh tomato pasta', publisher: 'Jonas'};
    //                 console.log(`${id}: ${recipe.title}`);

    //                 setTimeout(publisher => {
    //                     const recipe2 = {title: 'Italian Pizza', publisher: 'Jonas'};
    //                     console.log(recipe2);
    //                 }, 1500, recipe.publisher);

    //             }, 1500, recipeID[2]);

    //         }, 1500);
    //     }
       // getRecipe();
       //Promise
        // const getIds=new Promise((resolve,reject)=>{
        //    setTimeout(() => {
        //     resolve([523, 883, 432, 974]);      
        //    }, 1500);
        // });
        // const getRecipe= (recepiId) =>{
        //     return new Promise((res,rej)=>{
        //         setTimeout((id) => {
                   
        //           const recipe = {title: 'Fresh tomato pasta', publisher: 'Jonas'};
        //          res(`${id}: ${recipe.title}`);
        //         }, 1500,recepiId)
        //     });
        // };
        // const getPublisher =(publisher=>{
        //    return new Promise((resolve,reject)=>{
        //     setTimeout((pub) => {
        //         const recipe2 = {title: 'Italian Pizza', publisher: 'Jonas'};
        //               resolve(`${pub}:${recipe2.title}`);
        //     }, 1500,publisher);
        //    });
        // })
        // getIds.then((IDs)=>{
        //     console.log(IDs);
        //     return getRecipe(IDs[2]);
        // }).then((recipe)=>{
        //     console.log(recipe);
        //     return getPublisher('Jonas');
        // }).then((recipe)=>{
        //     console.log(recipe);
        // }).catch(error=>{
        //     console.log(error);
        //     })

        //async/await(es8  to consume promises)
//async function running background,this await simply await until promise resolved
           // async function getRecipeAW(){
            //     const ids= await getIds;
            //     console.log(ids);
            //     const recipe = await getRecipe(ids[2]);
            //     console.log(recipe);
            //     const publisher = await getPublisher('Jonas');
            //     console.log(publisher);
            //     return recipe;
            // }
            // getRecipeAW().then(recipe=>console.log(`${recipe} is the best ever`));
            // //asyn cfunction always return promise
            //api is a piece of software it will use another piece of software basically to talk to each other
            //api is part of server ,wn api,3rd part api(google maps,waeather,send mail,embed videso)
            //ajax async javascript xml,async communicate with remote server,with out reload page

            function getWeather(woeid){
                            fetch(`https://cors-anywhere.herokuapp.com//https://www.metaweather.com/api/location/${woeid}/`).then(result=>{
                //console.log(result);
                    return result.json();
                }).then(data=>{
                    console.log(data);
                }).catch(error=>console.log(error));
            }
            async function getWeatherAW(woeid){
             const result = await fetch(`http://www.whateverorigin.org/get?https://www.metaweather.com/api/location/${woeid}/`);
            // const data = await result.json();
             console.log(result)
            }
            getWeather(2487956);
            getWeather(44418);
            getWeatherAW(44418);
            
    </script>
</body>
</html>